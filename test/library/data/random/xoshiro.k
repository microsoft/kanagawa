// Copyright (c) Microsoft Corporation.
// Licensed under the MIT License.

//
// Copyright (c), Microsoft Corporation. All rights reserved.
//

import data.random.xoshiro
import test.unit as unit
import test.runner

class xoshiro_test
{
    xoshiro_random _random;
    const auto count = 1000;

    const memory<uint32, count> random_numbers = {
       0xc407f697, 0x2c4b5353, 0x8c68f7d7, 0xe7342f48, 0x27fce1c3, 0x2f73e918, 0x6b98f83b, 0xb1be003f, 0x9d1cf2d2, 0x2e38fbd1, 0x4b3ffdb7, 0xd478ff27, 0xf94a9978, 0x97837f2c, 0x5942f54f, 0xb2e01fee,
       0xfa2a0575, 0xe29ec6eb, 0x7594e22a, 0x5fa82030, 0x7f7328ee, 0xfbf939c0, 0x613619df, 0x4258526c, 0xa2b8cf42, 0x03524032, 0x63bdbc83, 0x891bcf1b, 0xf171c5f7, 0xc74d61de, 0x91daccb8, 0x0d5a78c5,
       0x82bd867d, 0x2c5e3898, 0x244d37a1, 0x55da97b2, 0x0f97e91a, 0x188cbe8b, 0xf108625d, 0xcd183f32, 0xf79d8f1c, 0x3564dee7, 0x455d53a6, 0x597fa899, 0x808b2365, 0xdc47f39d, 0xa3820a9e, 0xebb88978,
       0x68d7483b, 0xefac4ac4, 0x755c8120, 0xcefdf359, 0xb1acc8e1, 0x0433c573, 0x548fb376, 0xa68eb39f, 0xb1c30508, 0xf9069284, 0x278de58c, 0x14f3b990, 0x3969fa54, 0x57934f2b, 0x82371a14, 0x665a41eb,
       0xcc548ace, 0xde4ab13c, 0x9682a9a5, 0x9df19e3a, 0x233ffd02, 0xb541b985, 0x0065d246, 0xea41305b, 0x13c84581, 0x08776142, 0xa8b4cfe6, 0xcda4b0bb, 0xcb1ae676, 0xaaf28029, 0x5402dfd2, 0xe9f5d993,
       0xc6b5ae14, 0x9b24db6b, 0xfa5dd356, 0x3f52838e, 0x11b012b2, 0x2f4f97d2, 0x4bb94ecc, 0x54648ce2, 0x4f25b2df, 0xaa25035d, 0x93c23067, 0x89ced33f, 0x9b140401, 0x47491d09, 0x3023f914, 0x81d016a9,
       0x1acf3093, 0x95da19fe, 0xb20c8a6f, 0x0c2241b3, 0xbd2daf94, 0x3d590b88, 0x2e3a8062, 0x180d7012, 0x10e02efd, 0xecc6b323, 0x3102f658, 0xd2f0e6eb, 0xecd6b8ad, 0xeb6de3ee, 0x219620d8, 0x29f95763,
       0xe0c4bd40, 0xe58dc5e5, 0xaf8381f0, 0x51b742c4, 0x2399998c, 0xdd657bec, 0x56e2441d, 0x219c05bd, 0xfee4f4f9, 0x992072f5, 0x9fb06397, 0x43df3957, 0x9ce2dcbe, 0x4e305f9f, 0x2745cb55, 0xee402524,
       0x256948b6, 0xde26f13a, 0xac7eea53, 0xa2964c67, 0x2cad6101, 0x5deb03bb, 0x7d8423ac, 0x6864fb79, 0x0ca5e7a8, 0x3a3d3b61, 0x467309ac, 0x47fd5c86, 0xbbd17a3b, 0x67406681, 0x52423d1b, 0x57d0459c,
       0x2134daf0, 0x6ac9bbee, 0x9450f37f, 0x17121276, 0xf6cb591b, 0xa417eb3c, 0x8ccbaa4f, 0x20a7d43a, 0xbe5bbff7, 0x5284a9e6, 0xa09efb69, 0xebf7b3d3, 0x092074cc, 0x21489385, 0x6e3ed016, 0x5159e95b,
       0x754a1a5c, 0x1633d432, 0x8b57d133, 0xe9edf88f, 0xb69ab04c, 0xf8725c64, 0x5da81ee8, 0xa84fdb9c, 0x3f2acd6b, 0x4dc27c00, 0xe6a872f9, 0xb33a0405, 0xb3cd3175, 0x1ac222d4, 0x32ab319d, 0xfe86d9dd,
       0xb24ef3c1, 0x67017b1e, 0x83da708b, 0x1c94a5f7, 0xa8687c6e, 0x9edce899, 0x8adce33b, 0xb22713db, 0xd5ee1247, 0xafed1d30, 0xb325487d, 0x191bab54, 0x29264de4, 0xab63c4bf, 0x6e6242d6, 0x771a7ccc,
       0xb56fa3b6, 0x569d24db, 0xee4f053c, 0xc8847436, 0xab53660d, 0x4b2c62c7, 0x60326a62, 0xefb674c1, 0x7857ceb1, 0x85e88961, 0xaa29702b, 0x576d7935, 0xb5682793, 0x58606328, 0xa3a04e3d, 0xe69e588a,
       0xa770b36a, 0x4416e7ff, 0xd26cd93e, 0xf5e3f7b9, 0x735ef0c0, 0x5744c3e3, 0x979050e8, 0x342f92ad, 0xee56e726, 0x4b7a9d6b, 0x5874c9bf, 0x4af144c2, 0x48dc4001, 0x6ea6676e, 0x73a65d3d, 0x7cb8994a,
       0x2679833c, 0x59934587, 0xf9a61698, 0xb1b0d2a3, 0xff4aba4f, 0xcc90ee67, 0xaa647a2f, 0x7ac311d6, 0x531325a6, 0xae2cb6cc, 0x0ce89d6c, 0x5586cf40, 0xced4530d, 0x4cb77bdc, 0x3653a457, 0xa5d3aa36,
       0x8916ef39, 0xbac8e8d7, 0xebeac71a, 0xcea3a599, 0xfb17febc, 0xbd661396, 0x196416e8, 0xe0fdbc5b, 0xeacec9fd, 0x06661ad1, 0x1f784ef0, 0xd3d3515c, 0x8c27fa64, 0x0ba04b5d, 0x87b1734b, 0x33f0af78,
       0xa0103202, 0x0b441010, 0x64c1be5e, 0x00c1c654, 0x6d1e251c, 0x321a45bd, 0xe7789995, 0x575e5e9b, 0xf2977bfb, 0x93e64ce8, 0xd68655fb, 0xd4910ba2, 0x56c719f9, 0xeea06a39, 0x335061b6, 0x20326feb,
       0xa9ec4d51, 0xb7768579, 0x51982dfd, 0x7c6182b1, 0xbbfb98a0, 0x6a1a29fd, 0x5fe604fb, 0x70388ebb, 0xb5f2552c, 0x924f901c, 0x937c5adc, 0x63b4a041, 0x1881ad0a, 0xc92ed3b1, 0x3e92185b, 0x982bbb02,
       0x400ae6aa, 0x7aac0ab9, 0x7a06a45e, 0x6c377fed, 0xb6a265fd, 0x013be1a8, 0x88ea3d6c, 0x07b2891d, 0xe0e33026, 0xc73c4af3, 0x6f6e071a, 0x20f648ca, 0x566255bb, 0x3a1cda26, 0xf3e31744, 0xff94eed4,
       0x56f4a561, 0x2c31f664, 0x9e249b8c, 0x6432f069, 0x5ad20664, 0xec7f4637, 0xc0992e78, 0x91a4f03b, 0x1fbb3cc7, 0xb0d5d4b1, 0x4119ec68, 0xe1d517a3, 0xb9df955e, 0x65551266, 0xe19f52ec, 0x524a3e4b,
       0x438ac4a7, 0x01784767, 0x4eb0a9e3, 0x02a3edbe, 0xd2c8ce96, 0xff61cacd, 0x33cc2fa8, 0xa6ae68e6, 0xdf804d44, 0x705cf8af, 0x041f440b, 0xea2c8beb, 0x23f82210, 0x8bd6ae78, 0x728309e2, 0x776dcb86,
       0xa8c91523, 0xae7c367c, 0x65a06e6a, 0x6a335af6, 0xf435b59e, 0x15925f93, 0x70a256cf, 0x957309f5, 0x8f23c4b7, 0x51d611d2, 0xb3ad2cb2, 0x5f14919f, 0x159d2acf, 0xfc232983, 0xa2ebb03c, 0x45849478,
       0xda725ecc, 0x13ac8c19, 0x8a5b02a6, 0x09582006, 0xcb217c7e, 0xddbf5add, 0xbe312da4, 0xfb538ad6, 0x810096f6, 0x2d4fc021, 0xb4d8b5d6, 0xcbb19532, 0x1246f04f, 0xed2c43d9, 0x226c00f2, 0xc92533b6,
       0x8f592ba9, 0x0b6a20b4, 0x3febdedf, 0xb3946459, 0xfd4f17dc, 0xfdef73c5, 0x5ff3f733, 0x4bf333a6, 0x61d18e1a, 0xdcb12e95, 0x8d7bda74, 0x29940f73, 0x6fe6ca45, 0xb0e4a082, 0x1404f7ae, 0x4ca724e5,
       0x3a6d56ae, 0x242a4789, 0x02f451ed, 0xf2abfc1a, 0xc25cd50f, 0x1db2e348, 0x4b50ad5a, 0x4feae0c1, 0xc5c09192, 0xe5a40f6a, 0x9e114e90, 0x4e90356f, 0x461b677c, 0xf82b539a, 0xa5787209, 0x43c8f1ba,
       0x2169f69a, 0x9f375947, 0x1d065c91, 0xb7fbe555, 0x9df3a200, 0x58abaa67, 0xffa1c7d8, 0xf931dfeb, 0xcec1410a, 0x0722a1f8, 0x72ee700c, 0x24125d07, 0xa7b255d7, 0x8aa4a3f9, 0x8a625b4c, 0x9810ed00,
       0xd57ec927, 0x203401f6, 0xb4a8baee, 0x2976caf0, 0x2e01bb84, 0x5991cc66, 0x00e803fb, 0x56eeddc7, 0xde389b87, 0xd61f040e, 0x5eeaf3ac, 0x8c7e8305, 0xac7e37b6, 0x94fa3a99, 0xd272763e, 0xc2ab51a6,
       0xbdcc5596, 0x3eacd524, 0xc8e68b47, 0x57e6a5b7, 0x6fa4ecac, 0x53afef09, 0x78fd1767, 0xb8e8b5b5, 0xd1c5b2b0, 0xdff0aa97, 0x0b1d8423, 0x322fa1fb, 0xbdcb89ed, 0xbdc518bc, 0xe9522185, 0x2dc0cfdf,
       0xb9ccfbc6, 0xebdfa365, 0x5a2e1969, 0xe7d215a5, 0x8e36f16c, 0xff708c6d, 0x476745a5, 0x46ed20f4, 0x6a0c5ac5, 0xb3ffd5e8, 0xafaf42ee, 0x18cde4df, 0xbc73356d, 0xcad2d8df, 0xdb0027e7, 0x7c18e75a,
       0x835dae17, 0x287dd3ba, 0x524dc354, 0xe0f277b2, 0xe8f27f8e, 0xc70a8390, 0xe107cc12, 0xa17c3638, 0x28155121, 0xc19c1389, 0x334dcf4e, 0x61564cb8, 0x11fd79e2, 0x71f218d7, 0x3ce9aa3c, 0x79a18979,
       0x916be7dd, 0x56fcbe12, 0xd94459b5, 0x722f51d7, 0xcf1b0102, 0x09100c1a, 0xe31b785e, 0x043a7e02, 0xfd7a559c, 0xcf8ea084, 0x541d7256, 0x19330790, 0x5c4c16a3, 0x8507a70d, 0xcc378d23, 0x4dae5e7c,
       0xa0fe6522, 0xef4b390f, 0xa9235028, 0x700a2de5, 0x455b6b2a, 0x7df86c86, 0x982e6cef, 0x9ccc3874, 0x3878b163, 0x382ac0b9, 0xbb6c45d2, 0x59ea59af, 0xceeed7ab, 0x55a2c443, 0x910aacd5, 0x3f7d5789,
       0x99fa9161, 0x7f88cea8, 0x207e1c36, 0x898bab7e, 0x2890fca2, 0x531fad6a, 0x03c43fde, 0x1db54fe8, 0xae66191b, 0x0f5f5660, 0xa3d28ec1, 0x161aea70, 0x982257da, 0x1c407740, 0x6af3713b, 0x7e465f9d,
       0x8546027e, 0x5dfb31b8, 0x27cc2d53, 0xa055d03a, 0x76e2f1ac, 0x3f25d14c, 0x4356a4f6, 0xd4ce0244, 0x7f1dc0cd, 0xab3bf1e8, 0xc5e0fbec, 0x233e6a1c, 0x30c9a429, 0x3e68737f, 0xf634697e, 0x2f1ce058,
       0xacfd0ec3, 0x03b04cd6, 0xdcde82ce, 0xcae06dd4, 0x2e9e3bb2, 0xdf826c31, 0xa0b8fe7c, 0xe4321de5, 0x4b441b43, 0xe16b6b2e, 0x2acee442, 0x0f0aa03e, 0xda287434, 0x15f8bfaa, 0xa9db175b, 0x3e94fc8d,
       0xfa885e4f, 0x0937fa60, 0xe9081c42, 0xedd6dae9, 0x6358c31e, 0x2045c43e, 0x1ac8ab9c, 0x8556f5d7, 0xbdf6c365, 0xa745fbf3, 0x337d78c7, 0x9f9e55cb, 0x3cb3d042, 0xa7cc7ddc, 0x3d82bff7, 0xfed1a428,
       0x493d7861, 0x858002f4, 0x2cf85181, 0x58331945, 0x6c5b8f92, 0x12427dd7, 0x85ffa220, 0x0753f29e, 0xf091dab1, 0xc84983be, 0xf6bddbef, 0x07ca437c, 0xe16e105d, 0xd497e1e0, 0x4bda4713, 0x3c0c9b9d,
       0xf1c378eb, 0x0e092e7f, 0x6ac329f3, 0xc8ec05c3, 0xc25d80a8, 0xf9908cbb, 0x4942ca17, 0x407b03b3, 0x0d160caa, 0xaf3e8e6a, 0x8f1125df, 0xdef89309, 0xd9ac1b52, 0x2174b093, 0xdb14dc14, 0x9e37cf5c,
       0x00c0ada2, 0xe3395fb9, 0x4296261b, 0x6740513c, 0xfcee6d3d, 0xc1e501fc, 0x0bc56b9d, 0xcc43fff6, 0x4299c353, 0xf36853c3, 0x2a35ba2e, 0x5b9a441a, 0x3abe6651, 0x52b94e7a, 0x947b6b67, 0x834de8e8,
       0x57f837ed, 0x5d14465e, 0x47e10f1d, 0xfd409249, 0xf5c987c9, 0xed494b33, 0x060ea901, 0x067e2e2b, 0x37482997, 0x4fa803e8, 0xc0a49e98, 0x332c45eb, 0x4657d0dd, 0x19457cd5, 0xf622cc6b, 0x8063c882,
       0xf1688d2a, 0x9a3e9691, 0x1f5cf1f0, 0x853757ea, 0x0072353b, 0x9d1c0c23, 0x955e9934, 0xc126b788, 0x306f33ff, 0x5f77e78e, 0x528b9722, 0xe9e52633, 0x00783b26, 0x5e80bdab, 0x82e9927f, 0x4a348bd2,
       0xd35bf35e, 0x677d62d7, 0x18d6c8e5, 0x5d140906, 0xa4f8005c, 0x1973bf5b, 0x52fae490, 0x99865eb7, 0xffb9c6dc, 0xd6e88574, 0x6a120720, 0xb381580b, 0x3d4b3e30, 0xf03d619e, 0x8f6ec9fc, 0xe41f8f78,
       0xcf4f1f5b, 0x587b266e, 0x1c8c7d57, 0xa779a8ff, 0xf7201118, 0xcce41682, 0xf063056c, 0x780ee67e, 0xb38d9bd2, 0x7dc2f39c, 0xef9eb32b, 0x9f45fec8, 0x75171960, 0xc10beb92, 0x3acd2b98, 0x9f242b46,
       0x2d618a42, 0xf003635f, 0x91484c59, 0xe3153c98, 0xac3ccf71, 0x65f15ec8, 0x59ced87f, 0xae2f9e32, 0x54e3242e, 0xb765e8fc, 0xb5229606, 0x38e04d09, 0xd1704a07, 0xa75dabf4, 0x54cc7cda, 0x44c370c1,
       0xc5cc59a7, 0xcae2d2aa, 0xc0f6bbca, 0x5693f053, 0x3ecbdef1, 0xdc615476, 0xda52c396, 0x3b147076, 0xd449a7a0, 0x2136fff1, 0xa8f9fee3, 0x8559d385, 0x42451d88, 0x5091a028, 0xaf9505c9, 0x75a384f0,
       0x70a31f66, 0x05f57b73, 0xd2f41f3f, 0x5bf19c0a, 0xdb542a7c, 0xd3331894, 0x70b65105, 0x0e0aba2b, 0xa622c2bf, 0xed4a025a, 0xf6377c58, 0x56847bb0, 0x0322ebe2, 0x6f857d4f, 0x44e559a8, 0xf2da1dda,
       0x13c46faa, 0x3209dacc, 0x8cf34c98, 0x3c296089, 0xbe685806, 0x08b32116, 0xebc1613b, 0xd58648ee, 0x5b11f0cb, 0x6efb0b2d, 0x275c1834, 0xcad3360a, 0xe43839c7, 0xd267fae4, 0x700b5394, 0x5d07db59,
       0x804bef6e, 0x9ce39a64, 0x9e781ad1, 0x15cba30c, 0xd628c617, 0xc39e99a7, 0xd60349ad, 0xac206673, 0x97bf4371, 0xe202f3fe, 0x44547da9, 0x57123264, 0x19f8d5db, 0x26353bf7, 0xdc425b67, 0x16fd2fa1,
       0x17c84ee1, 0x47bb7c81, 0xe17fd740, 0x11546c72, 0xb4578043, 0x855eb655, 0x17c01748, 0x416c0126, 0xc6bf029f, 0x4732a8fc, 0x6921f4a9, 0x2bfd65cc, 0xea641765, 0x8c13c528, 0x8e8a7c04, 0x78e2c9aa,
       0xa1c60f3b, 0x16b0cc97, 0x29ba5f55, 0xf684b8dd, 0xd2bbc504, 0xee94d6c9, 0x3a38ddda, 0xbfe0a68d, 0x54f5424f, 0xe448c32b, 0x4314f6db, 0x323bec1e, 0x22913b4d, 0x8d7a7105, 0x0f219f62, 0xb41278c8,
       0x13bb8eaa, 0x83901cef, 0xc1d4d4d0, 0x3ade1f50, 0xafb2d058, 0x356471fc, 0xf1864a6c, 0xfa5600fc, 0x90b4bf0b, 0xd3cbfe5c, 0xc1d23bf6, 0x4b32adf6, 0x39aed77f, 0x78569887, 0x64c76a6e, 0x3c6fcdb8,
       0xfad08acf, 0xfa4c8654, 0xb4f67289, 0x0d00b3c0, 0x20d80615, 0x06a244d0, 0x0b1980cc, 0x5b270411, 0xde0f8e92, 0x0bf07022, 0xc1df4ef3, 0xf5a3a521, 0x77183548, 0x89a6283a, 0x6e00d22f, 0x5a19e4d4,
       0xf208bd05, 0xde6d057b, 0xb201b3ff, 0xa258cb3f, 0xb10d490f, 0x3d7805e6, 0xacd133be, 0xc1e55c59, 0xd60e372a, 0xfc26f7fc, 0x73793ab6, 0x60db9de1, 0x76ec978f, 0x60a4f2db, 0x30af83fd, 0x9c88f0dc,
       0x029c8166, 0x761afc7d, 0x165ab7f2, 0x25fdffb6, 0x0daab702, 0x8e0afae6, 0xbcbaaf3c, 0xcc9ecf48, 0xf1b4d151, 0x105e0b28, 0x446a0a3e, 0x9d604a0f, 0x8cab40b8, 0xa7d29e1d, 0xdb79b85f, 0x332950dd,
       0xbb21fb98, 0xfe24ba9d, 0xb92dbd95, 0x7009b2a4, 0xb7a083c4, 0xe8ad3b4f, 0x16acc49d, 0xa349206b, 0x0d00a356, 0x5745cfa3, 0x62ca1fbb, 0xac82884e, 0xa331011e, 0x2f2fbc2f, 0xde80da9e, 0x5c76117c,
       0x71194751, 0xcd642965, 0x612a48e7, 0xb34352d0, 0x18d73497, 0xcec18fad, 0xb371fc16, 0xb59ce249, 0xe2f9da80, 0x3af5849c, 0x28826d07, 0xd0c27d97, 0x0180e8e2, 0x07ed49b9, 0x2dd79110, 0xaad08284,
       0xf7db673b, 0x1bcf5dc8, 0x9e771095, 0x47b61607, 0x5fc1b9d5, 0x526124ac, 0xdbb919e1, 0x30b2f892, 0x2e0bbabe, 0x3cc227ed, 0xe7e28048, 0x6565b9bb, 0x65f667ce, 0xcbc7061a, 0x24f76150, 0x1e3d4cae,
       0xdcd88704, 0x5a6156fc, 0x47ee6489, 0x754ab07e, 0xdb510c09, 0x84a62abf, 0xb6fe7431, 0xff0c720c, 0xd1b49c9b, 0x17622d0c, 0x9fe7a47f, 0x3023e12b, 0xb1caa76e, 0xb1b36043, 0xfff319c5, 0x44bcb548,
       0xf825fc07, 0xef3b669f, 0x857d9c02, 0x89d31d42, 0xf14e1be6, 0xdb67751a, 0x4e2fb1b5, 0xe553f8e5, 0x21cf8270, 0x2621b754, 0xad16104f, 0xf91663e3, 0x265b356f, 0x10041733, 0xaad7d4e4, 0x98d39c13,
       0x9cde7688, 0x4f70eff6, 0x51f67bb8, 0xbea8820f, 0x0d971ea6, 0xb4473f14, 0x5428ce10, 0x854b6c4a, 0xeaf2f455, 0xc09c1cdb, 0x7735ac89, 0xaa39acd2, 0x74d6543c, 0x73d21eda, 0x63f916ca, 0xae1b9c8d,
       0x4eb78824, 0x01077e2e, 0xc0ad4a21, 0x4b1bd065, 0x28ad1a4f, 0xaf2f27dd, 0x02dcc4ae, 0x773b127a, 0x5f39774c, 0xd832863a, 0xec5639b1, 0x5e1e760b, 0x11bceb37, 0xacb27259, 0x798633ec, 0xc5e60ca1,
       0x68b60586, 0x1a232153, 0x02ecbf46, 0xe3cb77fe, 0x5ff0e44f, 0x05cf293c, 0xd5b64be0, 0x0972dfc9, 0x24cca5a5, 0x9eaeabda, 0x1755e64f, 0x78cb59ce, 0xa5c2103d, 0x37cb7117, 0x0ec55790, 0x6d35f96d,
       0xa798de25, 0xa40495d6, 0x876cfa74, 0xf3aee89a, 0xf56c8237, 0xca8d239f, 0x64c758bd, 0x486fed4b};
public:

    void run(unit::tag_t tag)
    {
        _random.set_seed(0x801);

        pipelined_for(count, [tag](index_t<count> i)
        {
            unit::assert_equal(tag, random_numbers[i], _random.next());
        });
    }
}

inline void test_main()
{
    unit::test<1>(unit::fixture<xoshiro_test>());
}
